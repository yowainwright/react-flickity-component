{"version":3,"sources":["../src/index.js"],"names":["FlickityComponent","props","state","flickityReady","carousel","flkty","prevProps","prevState","children","options","draggable","initialIndex","reloadOnUpdate","console","log","deactivate","selectedIndex","undefined","length","activate","reloadCells","canUseDOM","disableImagesLoaded","flickityRef","Flickity","setState","flickityEl","ReactDOM","findDOMNode","images","forEach","call","mountNode","querySelector","React","createElement","elementType","className","ref","c","renderPortal","Component","propTypes","PropTypes","bool","object","string","array","func","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport Flickity from 'flickity';\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport imagesloaded from 'imagesloaded';\nimport PropTypes from 'prop-types';\n\nclass FlickityComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      flickityReady: false,\n    };\n\n    this.carousel = null;\n    this.flkty = null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      children,\n      options: { draggable, initialIndex },\n      reloadOnUpdate,\n    } = this.props;\n    console.log('ham', this.props, this.state, this.flkty);\n    const { flickityReady } = this.state;\n    if (reloadOnUpdate || (!prevState.flickityReady && flickityReady)) {\n      console.log('ham', 'check 1');\n      this.flkty.deactivate();\n      this.flkty.selectedIndex = initialIndex || 0;\n      this.flkty.options.draggable =\n        draggable === undefined\n          ? children\n            ? children.length > 1\n            : false\n          : draggable;\n      this.flkty.activate();\n    } else {\n      console.log('ham', 'check 2');\n      this.flkty.reloadCells();\n    }\n  }\n\n  componentDidMount() {\n    if (canUseDOM) {\n      const { disableImagesLoaded, flickityRef, options } = this.props;\n      const carousel = this.carousel;\n      this.flkty = new Flickity(carousel, options);\n      console.log('ham', this.flkty);\n      if (disableImagesLoaded) {\n        this.setState({ flickityReady: true });\n      } else {\n        const flickityEl = ReactDOM.findDOMNode(this);\n        const images = [].forEach.call(flickityEl);\n        if (images.length > 0) {\n          imagesloaded(carousel, () => this.setState({ flickityReady: true }));\n        }\n      }\n      if (flickityRef) flickityRef(this.flkty);\n    }\n  }\n\n  renderPortal() {\n    if (!this.carousel) return null;\n\n    const mountNode = this.carousel.querySelector('.flickity-slider');\n    if (mountNode) {\n      return createPortal(this.props.children, mountNode);\n    }\n  }\n\n  render() {\n    return React.createElement(\n      this.props.elementType,\n      {\n        className: this.props.className,\n        ref: c => {\n          this.carousel = c;\n        },\n      },\n      this.renderPortal()\n    );\n  }\n}\n\nFlickityComponent.propTypes = {\n  disableImagesLoaded: PropTypes.bool,\n  reloadOnUpdate: PropTypes.bool,\n  options: PropTypes.object,\n  className: PropTypes.string,\n  elementType: PropTypes.string,\n  children: PropTypes.array,\n  flickityRef: PropTypes.func,\n};\n\nFlickityComponent.defaultProps = {\n  disableImagesLoaded: false,\n  reloadOnUpdate: false,\n  options: {},\n  className: '',\n  elementType: 'div',\n};\n\nexport default FlickityComponent;\n"]}